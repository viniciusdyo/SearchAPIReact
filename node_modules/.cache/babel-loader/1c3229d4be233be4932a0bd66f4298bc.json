{"ast":null,"code":"import _toConsumableArray from\"/home/vinidy/Documents/SearchAPIReact/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/home/vinidy/Documents/SearchAPIReact/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/home/vinidy/Documents/SearchAPIReact/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/vinidy/Documents/SearchAPIReact/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/vinidy/Documents/SearchAPIReact/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/vinidy/Documents/SearchAPIReact/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/home/vinidy/Documents/SearchAPIReact/node_modules/@babel/runtime/regenerator/index.js\";import{Component}from'react/cjs/react.production.min';import'./style.css';import{loadPosts}from'../../utils/load-posts';import{Posts}from'../../components/Posts';import{Button}from'../../components/Button';import{TextInput}from'../../components/TextInput';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export var Home=/*#__PURE__*/function(_Component){_inherits(Home,_Component);var _super=_createSuper(Home);function Home(){var _this;_classCallCheck(this,Home);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={posts:[],allPosts:[],page:0,postsPerPage:2,searchValue:''};_this.loadPosts=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this$state,page,postsPerPage,postsAndPhotos;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$state=_this.state,page=_this$state.page,postsPerPage=_this$state.postsPerPage;_context.next=3;return loadPosts();case 3:postsAndPhotos=_context.sent;_this.setState({posts:postsAndPhotos.slice(page,postsPerPage),allPosts:postsAndPhotos});case 5:case\"end\":return _context.stop();}}},_callee);}));_this.loadMorePosts=function(){var _this$state2=_this.state,page=_this$state2.page,postsPerPage=_this$state2.postsPerPage,allPosts=_this$state2.allPosts,posts=_this$state2.posts;var nextPage=page+postsPerPage;var nextPosts=allPosts.slice(nextPage,nextPage+postsPerPage);posts.push.apply(posts,_toConsumableArray(nextPosts));_this.setState({posts:posts,page:nextPage});};_this.handleChange=function(e){var value=e.target.value;_this.setState({searchValue:value});};return _this;}_createClass(Home,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return this.loadPosts();case 2:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:/* a key precida ficar no elemento root (<div>) */function render(){var _this$state3=this.state,posts=_this$state3.posts,page=_this$state3.page,postsPerPage=_this$state3.postsPerPage,allPosts=_this$state3.allPosts,searchValue=_this$state3.searchValue;var noMorePosts=page+postsPerPage>=allPosts.length;var filteredPosts=!!searchValue?allPosts.filter(function(post){return post.title.toLowerCase().includes(searchValue.toLowerCase());}):posts;return/*#__PURE__*/_jsxs(\"section\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[!!searchValue&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"h1\",{children:[\"Search value: \",searchValue]})}),/*#__PURE__*/_jsx(TextInput,{searchValue:searchValue,handleChange:this.handleChange})]}),filteredPosts.length>0&&/*#__PURE__*/_jsx(Posts,{posts:filteredPosts}),filteredPosts.length===0&&/*#__PURE__*/_jsx(\"p\",{children:\"N\\xE3o existem posts\"}),/*#__PURE__*/_jsx(\"div\",{className:\"button-container\",children:!searchValue&&/*#__PURE__*/_jsx(Button,{text:\"Load more posts\",OnClick:this.loadMorePosts,disabled:noMorePosts})})]});}}]);return Home;}(Component);/* \nclass App extends Component { \n// extende o Component\n  render() { // método render - seu retorno renderiza o conteúdo na página\n    return <h1>Oi</h1>;\n  } */","map":{"version":3,"sources":["/home/vinidy/Documents/SearchAPIReact/src/templates/Home/index.jsx"],"names":["Component","loadPosts","Posts","Button","TextInput","Home","state","posts","allPosts","page","postsPerPage","searchValue","postsAndPhotos","setState","slice","loadMorePosts","nextPage","nextPosts","push","handleChange","e","value","target","noMorePosts","length","filteredPosts","filter","post","title","toLowerCase","includes"],"mappings":"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","sourcesContent":["import { Component } from 'react/cjs/react.production.min';\n\nimport './style.css';\n\nimport { loadPosts } from '../../utils/load-posts';\nimport { Posts } from '../../components/Posts';\nimport { Button } from '../../components/Button';\nimport { TextInput } from '../../components/TextInput';\n\nexport class Home extends Component {\n\n  state = {\n    posts: [],\n    allPosts: [],\n    page: 0,\n    postsPerPage: 2,\n    searchValue: ''\n  };\n\n\n  async componentDidMount() {\n    await this.loadPosts();\n  }\n  loadPosts = async () => {\n    const { page, postsPerPage } = this.state;\n    const postsAndPhotos = await loadPosts();\n\n    this.setState({\n      posts: postsAndPhotos.slice(page, postsPerPage),\n      allPosts: postsAndPhotos,\n    });\n  }\n\n  loadMorePosts = () => {\n    const {\n      page,\n      postsPerPage,\n      allPosts,\n      posts\n    } = this.state;\n\n    const nextPage = page + postsPerPage;\n    const nextPosts = allPosts.slice(nextPage, nextPage + postsPerPage)\n    posts.push(...nextPosts);\n\n    this.setState({ posts, page: nextPage });\n  }\n\n  handleChange = (e) => {\n    const { value } = (e).target;\n    this.setState({ searchValue: value });\n  }\n  /* a key precida ficar no elemento root (<div>) */\n  render() {\n    const { posts, page, postsPerPage, allPosts, searchValue } = this.state;\n    const noMorePosts = page + postsPerPage >= allPosts.length;\n\n    const filteredPosts = !!searchValue ?\n      allPosts.filter(post => {\n        return post.title.toLowerCase().includes(\n          searchValue.toLowerCase()\n\n        );\n      })\n      : posts;\n\n    return (\n      <section className=\"container\">\n        <div className=\"search-container\">\n          \n        {!!searchValue && (\n          <>\n            <h1>Search value: {searchValue}</h1>\n          </>\n        )}\n        <TextInput searchValue={searchValue} handleChange={this.handleChange} />\n        </div>\n\n\n        {filteredPosts.length > 0 && (\n          <Posts posts={filteredPosts} />\n        )}\n\n        {filteredPosts.length === 0 && (\n          <p>Não existem posts</p>\n        )}\n\n        <div className=\"button-container\">\n          {!searchValue && (\n            <Button\n              text=\"Load more posts\"\n              OnClick={this.loadMorePosts}\n              disabled={noMorePosts}\n            />\n          )}\n\n        </div>\n      </section>\n    );\n  }\n}\n\n/* \nclass App extends Component { \n// extende o Component\n  render() { // método render - seu retorno renderiza o conteúdo na página\n    return <h1>Oi</h1>;\n  } */\n\n"]},"metadata":{},"sourceType":"module"}